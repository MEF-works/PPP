{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Portable Preference Identity Protocol (PIP) Schema",
  "version": "0.1.0",
  "description": "A portable identity format that carries user preferences, behaviors, and interaction styles across the internet",
  "type": "object",
  "required": ["version", "metadata"],
  "properties": {
    "version": {
      "type": "string",
      "description": "PIP schema version (e.g., '0.1.0')",
      "pattern": "^\\d+\\.\\d+\\.\\d+$"
    },
    "metadata": {
      "type": "object",
      "required": ["created", "updated"],
      "properties": {
        "created": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 timestamp when identity was created"
        },
        "updated": {
          "type": "string",
          "format": "date-time",
          "description": "ISO 8601 timestamp when identity was last updated"
        },
        "owner": {
          "type": "string",
          "description": "Owner identifier (wallet address, email, or username)"
        },
        "signature": {
          "type": "string",
          "description": "Cryptographic signature for authenticity (optional)"
        }
      }
    },
    "preferences": {
      "type": "object",
      "description": "User preferences that apps should honor",
      "properties": {
        "ui": {
          "type": "object",
          "properties": {
            "theme": {
              "type": "string",
              "enum": ["light", "dark", "auto", "high-contrast"],
              "default": "auto",
              "description": "Visual theme preference"
            },
            "density": {
              "type": "string",
              "enum": ["compact", "comfortable", "spacious"],
              "default": "comfortable",
              "description": "UI element spacing preference"
            },
            "fontSize": {
              "type": "string",
              "enum": ["small", "medium", "large", "xlarge"],
              "default": "medium",
              "description": "Base font size preference"
            },
            "colorBlindMode": {
              "type": "boolean",
              "default": false,
              "description": "Enable color-blind friendly palettes"
            },
            "reducedMotion": {
              "type": "boolean",
              "default": false,
              "description": "Prefer reduced motion animations"
            }
          }
        },
        "interaction": {
          "type": "object",
          "properties": {
            "tone": {
              "type": "string",
              "enum": ["formal", "casual", "friendly", "professional", "minimal"],
              "default": "friendly",
              "description": "Preferred communication tone"
            },
            "verbosity": {
              "type": "string",
              "enum": ["minimal", "moderate", "detailed", "verbose"],
              "default": "moderate",
              "description": "How much explanation the user prefers"
            },
            "confirmationStyle": {
              "type": "string",
              "enum": ["always", "destructive-only", "never"],
              "default": "destructive-only",
              "description": "When to show confirmation dialogs"
            },
            "keyboardShortcuts": {
              "type": "boolean",
              "default": true,
              "description": "Prefer keyboard navigation"
            }
          }
        },
        "automation": {
          "type": "object",
          "properties": {
            "level": {
              "type": "string",
              "enum": ["none", "suggestions", "auto-approve-safe", "aggressive"],
              "default": "suggestions",
              "description": "How much automation the user is comfortable with"
            },
            "aiSuggestions": {
              "type": "boolean",
              "default": true,
              "description": "Enable AI-powered suggestions"
            },
            "autoSave": {
              "type": "boolean",
              "default": true,
              "description": "Automatically save work"
            },
            "predictiveActions": {
              "type": "boolean",
              "default": false,
              "description": "Allow system to predict and execute actions"
            },
            "maxAutomationScope": {
              "type": "string",
              "enum": ["local", "session", "account", "global"],
              "default": "session",
              "description": "Maximum scope for automated actions"
            }
          }
        },
        "notifications": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": true,
              "description": "Enable notifications"
            },
            "frequency": {
              "type": "string",
              "enum": ["realtime", "batched", "digest", "off"],
              "default": "batched",
              "description": "Notification delivery frequency"
            },
            "channels": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": ["in-app", "email", "push", "sms"]
              },
              "default": ["in-app"],
              "description": "Preferred notification channels"
            },
            "quietHours": {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "default": false
                },
                "start": {
                  "type": "string",
                  "pattern": "^\\d{2}:\\d{2}$",
                  "description": "Start time in HH:MM format"
                },
                "end": {
                  "type": "string",
                  "pattern": "^\\d{2}:\\d{2}$",
                  "description": "End time in HH:MM format"
                }
              }
            }
          }
        },
        "content": {
          "type": "object",
          "properties": {
            "language": {
              "type": "string",
              "pattern": "^[a-z]{2}(-[A-Z]{2})?$",
              "default": "en",
              "description": "Preferred language (ISO 639-1)"
            },
            "dateFormat": {
              "type": "string",
              "enum": ["ISO", "US", "EU", "relative"],
              "default": "ISO",
              "description": "Preferred date format"
            },
            "timeFormat": {
              "type": "string",
              "enum": ["12h", "24h"],
              "default": "24h",
              "description": "Preferred time format"
            },
            "currency": {
              "type": "string",
              "pattern": "^[A-Z]{3}$",
              "default": "USD",
              "description": "Preferred currency (ISO 4217)"
            },
            "contentFilter": {
              "type": "string",
              "enum": ["none", "moderate", "strict"],
              "default": "moderate",
              "description": "Content filtering preference"
            }
          }
        },
        "privacy": {
          "type": "object",
          "properties": {
            "dataSharing": {
              "type": "string",
              "enum": ["none", "anonymized", "full"],
              "default": "anonymized",
              "description": "Data sharing comfort level"
            },
            "analytics": {
              "type": "boolean",
              "default": true,
              "description": "Allow analytics tracking"
            },
            "personalization": {
              "type": "boolean",
              "default": true,
              "description": "Allow personalization based on behavior"
            }
          }
        },
        "accessibility": {
          "type": "object",
          "properties": {
            "screenReader": {
              "type": "boolean",
              "default": false,
              "description": "Screen reader optimized"
            },
            "highContrast": {
              "type": "boolean",
              "default": false,
              "description": "High contrast mode"
            },
            "focusIndicators": {
              "type": "string",
              "enum": ["minimal", "standard", "enhanced"],
              "default": "standard",
              "description": "Focus indicator visibility"
            }
          }
        },
        "risk": {
          "type": "object",
          "properties": {
            "tolerance": {
              "type": "string",
              "enum": ["conservative", "moderate", "aggressive"],
              "default": "moderate",
              "description": "Risk tolerance level"
            },
            "requireConfirmation": {
              "type": "boolean",
              "default": true,
              "description": "Require confirmation for risky actions"
            },
            "maxTransactionAmount": {
              "type": "number",
              "minimum": 0,
              "description": "Maximum transaction amount without additional confirmation"
            }
          }
        }
      }
    },
    "behaviors": {
      "type": "object",
      "description": "Observed or declared behavioral patterns",
      "properties": {
        "workflow": {
          "type": "string",
          "enum": ["linear", "exploratory", "task-focused", "multi-tasking"],
          "description": "Preferred workflow style"
        },
        "learningStyle": {
          "type": "string",
          "enum": ["tutorial", "examples", "trial-and-error", "documentation"],
          "description": "How the user prefers to learn new features"
        },
        "decisionSpeed": {
          "type": "string",
          "enum": ["deliberate", "balanced", "quick"],
          "description": "How quickly the user makes decisions"
        }
      }
    }
  }
}

